# Generated by Django 5.2.6 on 2025-10-06 14:51

import django.core.validators
import django.db.models.deletion
from django.conf import settings
from django.db import migrations, models


class Migration(migrations.Migration):

    initial = True

    dependencies = [
        ('jobs', '0003_job_job_description_file_alter_job_company_logo'),
        migrations.swappable_dependency(settings.AUTH_USER_MODEL),
    ]

    operations = [
        migrations.CreateModel(
            name='AlertType',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Nom')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('icon', models.CharField(default='fas fa-bell', max_length=50, verbose_name='Icône')),
                ('color', models.CharField(default='#007bff', max_length=7, verbose_name='Couleur')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Créé le')),
            ],
            options={
                'verbose_name': "Type d'alerte",
                'verbose_name_plural': "Types d'alerte",
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='AlertAnalytics',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('date', models.DateField(verbose_name='Date')),
                ('total_alerts_sent', models.PositiveIntegerField(default=0, verbose_name='Alertes envoyées totales')),
                ('total_alerts_delivered', models.PositiveIntegerField(default=0, verbose_name='Alertes livrées totales')),
                ('total_alerts_opened', models.PositiveIntegerField(default=0, verbose_name='Alertes ouvertes totales')),
                ('total_alerts_clicked', models.PositiveIntegerField(default=0, verbose_name='Alertes cliquées totales')),
                ('alerts_by_type', models.JSONField(default=dict, verbose_name='Alertes par type')),
                ('email_alerts_sent', models.PositiveIntegerField(default=0, verbose_name='Alertes email envoyées')),
                ('push_alerts_sent', models.PositiveIntegerField(default=0, verbose_name='Alertes push envoyées')),
                ('sms_alerts_sent', models.PositiveIntegerField(default=0, verbose_name='Alertes SMS envoyées')),
                ('delivery_rate', models.FloatField(default=0, verbose_name='Taux de livraison (%)')),
                ('open_rate', models.FloatField(default=0, verbose_name="Taux d'ouverture (%)")),
                ('click_rate', models.FloatField(default=0, verbose_name='Taux de clic (%)')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Créé le')),
            ],
            options={
                'verbose_name': "Analytics d'alerte",
                'verbose_name_plural': "Analytics d'alertes",
                'ordering': ['-date'],
                'unique_together': {('date',)},
            },
        ),
        migrations.CreateModel(
            name='AlertTemplate',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=100, verbose_name='Nom')),
                ('subject_template', models.CharField(max_length=200, verbose_name='Modèle de sujet')),
                ('message_template', models.TextField(verbose_name='Modèle de message')),
                ('html_template', models.TextField(blank=True, verbose_name='Modèle HTML')),
                ('available_variables', models.JSONField(default=list, verbose_name='Variables disponibles')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('is_default', models.BooleanField(default=False, verbose_name='Par défaut')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Créé le')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Modifié le')),
                ('alert_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='templates', to='alerts.alerttype', verbose_name="Type d'alerte")),
            ],
            options={
                'verbose_name': "Modèle d'alerte",
                'verbose_name_plural': "Modèles d'alerte",
                'ordering': ['name'],
            },
        ),
        migrations.CreateModel(
            name='AlertPreference',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('email_alerts', models.BooleanField(default=True, verbose_name='Alertes par email')),
                ('push_notifications', models.BooleanField(default=True, verbose_name='Notifications push')),
                ('sms_alerts', models.BooleanField(default=False, verbose_name='Alertes SMS')),
                ('frequency', models.CharField(choices=[('immediate', 'Immédiat'), ('daily', 'Quotidien'), ('weekly', 'Hebdomadaire'), ('monthly', 'Mensuel'), ('never', 'Jamais')], default='daily', max_length=20, verbose_name='Fréquence')),
                ('max_alerts_per_day', models.PositiveIntegerField(default=5, verbose_name="Maximum d'alertes par jour")),
                ('include_salary', models.BooleanField(default=True, verbose_name='Inclure les salaires')),
                ('include_remote_jobs', models.BooleanField(default=True, verbose_name='Inclure les emplois à distance')),
                ('include_part_time', models.BooleanField(default=False, verbose_name='Inclure les emplois à temps partiel')),
                ('include_internships', models.BooleanField(default=False, verbose_name='Inclure les stages')),
                ('max_distance', models.PositiveIntegerField(default=50, help_text='Distance maximale en km', verbose_name='Distance maximale')),
                ('preferred_locations', models.JSONField(default=list, verbose_name='Localisations préférées')),
                ('min_salary', models.PositiveIntegerField(blank=True, null=True, verbose_name='Salaire minimum')),
                ('max_salary', models.PositiveIntegerField(blank=True, null=True, verbose_name='Salaire maximum')),
                ('min_experience', models.PositiveIntegerField(default=0, verbose_name='Expérience minimum (années)')),
                ('max_experience', models.PositiveIntegerField(blank=True, null=True, verbose_name='Expérience maximum (années)')),
                ('preferred_job_types', models.JSONField(default=list, verbose_name="Types d'emploi préférés")),
                ('preferred_industries', models.JSONField(default=list, verbose_name='Secteurs préférés')),
                ('preferred_skills', models.JSONField(default=list, verbose_name='Compétences préférées')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Créé le')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Modifié le')),
                ('user', models.OneToOneField(on_delete=django.db.models.deletion.CASCADE, related_name='alert_preferences', to=settings.AUTH_USER_MODEL, verbose_name='Utilisateur')),
                ('enabled_alert_types', models.ManyToManyField(blank=True, to='alerts.alerttype', verbose_name="Types d'alertes activés")),
            ],
            options={
                'verbose_name': "Préférence d'alerte",
                'verbose_name_plural': "Préférences d'alertes",
            },
        ),
        migrations.CreateModel(
            name='AlertCampaign',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('name', models.CharField(max_length=200, verbose_name='Nom')),
                ('description', models.TextField(blank=True, verbose_name='Description')),
                ('target_criteria', models.JSONField(default=dict, verbose_name='Critères de ciblage')),
                ('subject', models.CharField(max_length=200, verbose_name='Sujet')),
                ('message', models.TextField(verbose_name='Message')),
                ('html_content', models.TextField(blank=True, verbose_name='Contenu HTML')),
                ('status', models.CharField(choices=[('draft', 'Brouillon'), ('scheduled', 'Programmée'), ('running', 'En cours'), ('completed', 'Terminée'), ('cancelled', 'Annulée')], default='draft', max_length=20, verbose_name='Statut')),
                ('scheduled_at', models.DateTimeField(blank=True, null=True, verbose_name='Programmée pour')),
                ('started_at', models.DateTimeField(blank=True, null=True, verbose_name='Démarrée le')),
                ('completed_at', models.DateTimeField(blank=True, null=True, verbose_name='Terminée le')),
                ('total_recipients', models.PositiveIntegerField(default=0, verbose_name='Destinataires totaux')),
                ('emails_sent', models.PositiveIntegerField(default=0, verbose_name='Emails envoyés')),
                ('emails_delivered', models.PositiveIntegerField(default=0, verbose_name='Emails livrés')),
                ('emails_opened', models.PositiveIntegerField(default=0, verbose_name='Emails ouverts')),
                ('emails_clicked', models.PositiveIntegerField(default=0, verbose_name='Emails cliqués')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Créée le')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Modifiée le')),
                ('created_by', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='created_campaigns', to=settings.AUTH_USER_MODEL, verbose_name='Créée par')),
                ('target_users', models.ManyToManyField(blank=True, related_name='alert_campaigns', to=settings.AUTH_USER_MODEL, verbose_name='Utilisateurs ciblés')),
                ('alert_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='campaigns', to='alerts.alerttype', verbose_name="Type d'alerte")),
            ],
            options={
                'verbose_name': "Campagne d'alertes",
                'verbose_name_plural': "Campagnes d'alertes",
                'ordering': ['-created_at'],
            },
        ),
        migrations.CreateModel(
            name='AlertSubscription',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('keywords', models.JSONField(default=list, verbose_name='Mots-clés')),
                ('locations', models.JSONField(default=list, verbose_name='Localisations')),
                ('job_types', models.JSONField(default=list, verbose_name="Types d'emploi")),
                ('industries', models.JSONField(default=list, verbose_name='Secteurs')),
                ('salary_range', models.JSONField(default=dict, verbose_name='Fourchette de salaire')),
                ('is_active', models.BooleanField(default=True, verbose_name='Active')),
                ('frequency', models.CharField(choices=[('immediate', 'Immédiat'), ('daily', 'Quotidien'), ('weekly', 'Hebdomadaire'), ('monthly', 'Mensuel'), ('never', 'Jamais')], default='daily', max_length=20, verbose_name='Fréquence')),
                ('total_alerts_received', models.PositiveIntegerField(default=0, verbose_name='Alertes reçues totales')),
                ('last_alert_sent', models.DateTimeField(blank=True, null=True, verbose_name='Dernière alerte envoyée')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Créée le')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Modifiée le')),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alert_subscriptions', to=settings.AUTH_USER_MODEL, verbose_name='Utilisateur')),
                ('alert_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='subscriptions', to='alerts.alerttype', verbose_name="Type d'alerte")),
            ],
            options={
                'verbose_name': "Abonnement d'alerte",
                'verbose_name_plural': "Abonnements d'alertes",
                'ordering': ['-created_at'],
                'unique_together': {('user', 'alert_type')},
            },
        ),
        migrations.CreateModel(
            name='AlertNotification',
            fields=[
                ('id', models.BigAutoField(auto_created=True, primary_key=True, serialize=False, verbose_name='ID')),
                ('title', models.CharField(max_length=200, verbose_name='Titre')),
                ('message', models.TextField(verbose_name='Message')),
                ('match_score', models.FloatField(validators=[django.core.validators.MinValueValidator(0), django.core.validators.MaxValueValidator(100)], verbose_name='Score de correspondance')),
                ('match_reasons', models.JSONField(default=list, verbose_name='Raisons de correspondance')),
                ('status', models.CharField(choices=[('pending', 'En attente'), ('sent', 'Envoyée'), ('delivered', 'Livrée'), ('opened', 'Ouverte'), ('clicked', 'Cliquée'), ('failed', 'Échouée')], default='pending', max_length=20, verbose_name='Statut')),
                ('sent_at', models.DateTimeField(blank=True, null=True, verbose_name='Envoyée le')),
                ('delivered_at', models.DateTimeField(blank=True, null=True, verbose_name='Livrée le')),
                ('opened_at', models.DateTimeField(blank=True, null=True, verbose_name='Ouverte le')),
                ('clicked_at', models.DateTimeField(blank=True, null=True, verbose_name='Cliquée le')),
                ('email_sent', models.BooleanField(default=False, verbose_name='Email envoyé')),
                ('push_sent', models.BooleanField(default=False, verbose_name='Push envoyé')),
                ('sms_sent', models.BooleanField(default=False, verbose_name='SMS envoyé')),
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Créé le')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Modifié le')),
                ('job', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alerts', to='jobs.job', verbose_name="Offre d'emploi")),
                ('user', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alert_notifications', to=settings.AUTH_USER_MODEL, verbose_name='Utilisateur')),
                ('alert_type', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='alert_notifications', to='alerts.alerttype', verbose_name="Type d'alerte")),
            ],
            options={
                'verbose_name': "Notification d'alerte",
                'verbose_name_plural': "Notifications d'alertes",
                'ordering': ['-created_at'],
                'unique_together': {('user', 'job', 'alert_type')},
            },
        ),
    ]
