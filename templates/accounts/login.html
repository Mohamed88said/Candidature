{% extends 'base_auth.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}Connexion - Plateforme de Recrutement{% endblock %}

{% block auth_title %}Connexion{% endblock %}

{% block auth_subtitle %}Connectez-vous à votre compte pour accéder à toutes les fonctionnalités{% endblock %}

{% block auth_content %}
<form method="post" class="auth-form">
    {% csrf_token %}
    <div class="form-group">
        <label for="{{ form.username.id_for_label }}" class="form-label">
            <i class="fas fa-user"></i>
            <span>Nom d'utilisateur ou email</span>
        </label>
        {{ form.username|add_class:"form-control" }}
        {% if form.username.errors %}
        <div class="form-errors">
            {% for error in form.username.errors %}
            <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="form-group">
        <label for="{{ form.password.id_for_label }}" class="form-label">
            <i class="fas fa-lock"></i>
            <span>Mot de passe</span>
        </label>
        <div class="password-input">
            {{ form.password|add_class:"form-control" }}
            <button type="button" class="password-toggle" id="password-toggle">
                <i class="fas fa-eye"></i>
            </button>
        </div>
        {% if form.password.errors %}
        <div class="form-errors">
            {% for error in form.password.errors %}
            <span class="error-message">{{ error }}</span>
            {% endfor %}
        </div>
        {% endif %}
    </div>

    <div class="form-options">
        <div class="form-check">
            <input type="checkbox" class="form-check-input" id="remember-me" name="remember_me">
            <label class="form-check-label" for="remember-me">
                Se souvenir de moi
            </label>
        </div>
        <a href="{% url 'accounts:password_reset' %}" class="forgot-password">
            Mot de passe oublié ?
        </a>
    </div>

    <button type="submit" class="btn btn-primary btn-auth">
        <i class="fas fa-sign-in-alt"></i>
        <span>Se connecter</span>
    </button>
</form>
{% endblock %}

{% block auth_footer %}
<div class="auth-footer-content">
    <p>Pas encore de compte ? <a href="{% url 'accounts:register' %}">Créer un compte</a></p>
    <div class="auth-divider">
        <span>ou</span>
    </div>
    <div class="social-auth">
        <button class="btn btn-social btn-google">
            <i class="fab fa-google"></i>
            <span>Continuer avec Google</span>
        </button>
        <button class="btn btn-social btn-linkedin">
            <i class="fab fa-linkedin"></i>
            <span>Continuer avec LinkedIn</span>
        </button>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // Password toggle
    document.getElementById('password-toggle').addEventListener('click', function() {
        const passwordInput = document.querySelector('input[name="password"]');
        const icon = this.querySelector('i');
        
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text';
            icon.classList.remove('fa-eye');
            icon.classList.add('fa-eye-slash');
        } else {
            passwordInput.type = 'password';
            icon.classList.remove('fa-eye-slash');
            icon.classList.add('fa-eye');
        }
    });
    
    // Form validation
    document.querySelector('.auth-form').addEventListener('submit', function(e) {
        const username = document.querySelector('input[name="username"]').value.trim();
        const password = document.querySelector('input[name="password"]').value.trim();
        
        if (!username || !password) {
            e.preventDefault();
            alert('Veuillez remplir tous les champs obligatoires.');
        }
    });
</script>
{% endblock %}